<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'><h1 id="forecastly">Forecastly</h1>

<p>A Ruby on Rails weather application that provides current weather information based on user-provided addresses using the OpenWeatherMap API.</p>

<p><img src="/public/forecastly.png" alt="Forecastly Weather App"></p>

<h2 id="features">Features</h2>

<ul>
<li>Real-time weather data for any address worldwide</li>
<li>Temperature display in Fahrenheit</li>
<li>Response caching for improved performance</li>
<li>Mobile-responsive design</li>
</ul>

<h2 id="architecture">Architecture</h2>

<ul>
<li>MVC architecture following Rails conventions</li>
<li>Service objects for API interactions</li>
</ul>

<h2 id="code-review-guide">Code Review Guide</h2>

<p>The core business logic of this application is concentrated in the following files:</p>

<h3 id="weather-controller">Weather Controller</h3>

<ul>
<li><a href="app/controllers/weather_controller.rb"><code>app/controllers/weather_controller.rb</code></a>: Entry point for weather requests, handles user input and displays results</li>
</ul>

<h3 id="weather-module-services">Weather Module Services</h3>

<p>All key business logic is organized in the <code>Weather</code> module:</p>

<ul>
<li><a href="app/services/weather/client.rb"><code>app/services/weather/client.rb</code></a>: Main orchestrator that coordinates the weather lookup process</li>
<li><a href="app/services/weather/forecast.rb"><code>app/services/weather/forecast.rb</code></a>: Handles API interactions with OpenWeather and caching logic</li>
<li><a href="app/services/weather/location_lookup.rb"><code>app/services/weather/location_lookup.rb</code></a>: Manages geocoding addresses to coordinates</li>
<li><a href="app/services/weather/address_parser.rb"><code>app/services/weather/address_parser.rb</code></a>: Parses and normalizes address inputs</li>
<li><a href="app/services/weather/coordinates.rb"><code>app/services/weather/coordinates.rb</code></a>: Value object for location data validation</li>
</ul>

<p>Other files in the project primarily handle configuration, styling, and standard Rails setup.</p>

<h2 id="monitoring-and-error-handling">Monitoring and Error Handling</h2>

<ul>
<li>Error logging with Rails logger</li>
<li>Fallback behavior for API failures</li>
<li>Cache hit/miss monitoring</li>
</ul>

<h2 id="browser-support">Browser Support</h2>

<ul>
<li>Chrome (latest 2 versions)</li>
<li>Firefox (latest 2 versions)</li>
<li>Safari (latest 2 versions)</li>
<li>Edge (latest 2 versions)</li>
</ul>

<h2 id="known-limitations">Known Limitations</h2>

<ul>
<li>Free tier API rate limits (60 calls/minute)</li>
<li>Weather data updates every 30 minutes (cached)</li>
<li>Limited to current weather (no forecasting in free tier)</li>
<li>Some remote locations may not have accurate data</li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
<li>Ruby 3.x</li>
<li>Rails 7.2.x</li>
<li>OpenWeatherMap API key</li>
</ul>

<h2 id="dependencies-installation">Dependencies Installation</h2>

<h3 id="macos-using-homebrew">macOS (using Homebrew)</h3>

<ol>
<li>Install Homebrew if not already installed:</li>
</ol>

<pre class="code bash"><code class="bash">/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;
</code></pre>

<ol>
<li>Install Ruby:</li>
</ol>

<pre class="code bash"><code class="bash">brew install ruby
echo &#39;export PATH=&quot;/usr/local/opt/ruby/bin:$PATH&quot;&#39; &gt;&gt; ~/.zshrc
source ~/.zshrc
</code></pre>

<ol>
<li>Install Rails:</li>
</ol>

<pre class="code bash"><code class="bash">gem install rails -v 7.2.0
</code></pre>

<h3 id="ubuntu-debian">Ubuntu/Debian</h3>

<ol>
<li>Install Ruby dependencies:</li>
</ol>

<pre class="code bash"><code class="bash">sudo apt update
sudo apt install ruby-full ruby-bundler git curl
</code></pre>

<ol>
<li>Install Rails:</li>
</ol>

<pre class="code bash"><code class="bash">gem install rails -v 7.2.0
</code></pre>

<h2 id="setup">Setup</h2>

<ol>
<li>Clone the repository:</li>
</ol>

<pre class="code bash"><code class="bash">git clone https://github.com/dandrews/forecastly.git
cd forecastly
</code></pre>

<ol>
<li>Install dependencies:</li>
</ol>

<pre class="code bash"><code class="bash">bundle install
</code></pre>

<ol>
<li>Set up environment variables:</li>
</ol>

<pre class="code bash"><code class="bash">cp .env.example .env
</code></pre>

<p>Edit <code>.env</code> and add your OpenWeatherMap API key:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>OPENWEATHER_API_KEY</span><span class='op'>=</span><span class='id identifier rubyid_your_api_key_here'>your_api_key_here</span>
</code></pre>

<ol>
<li>Start the Rails server:</li>
</ol>

<pre class="code bash"><code class="bash">rails server
</code></pre>

<p>The application will be available at <code>http://localhost:3000</code></p>

<h2 id="openweathermap-api-setup">OpenWeatherMap API Setup</h2>

<ol>
<li>Sign up for a free account at <a href="https://openweathermap.org/api">OpenWeatherMap</a></li>
<li>Navigate to your API keys section</li>
<li>Generate a new API key</li>
<li>The application uses two OpenWeatherMap API endpoints:

<ul>
<li>Geocoding API (<code>/geo/1.0/direct</code>)</li>
<li>Current Weather API (<code>/data/2.5/weather</code>)</li>
</ul></li>
</ol>

<p>Note: Free tier API limits:</p>

<ul>
<li>60 calls/minute for weather data</li>
<li>60 calls/minute for geocoding</li>
</ul>

<h2 id="running-tests">Running Tests</h2>

<p>The application uses RSpec for testing. To run the test suite:</p>

<pre class="code bash"><code class="bash"># Run all tests
bundle exec rspec

# Run specific test file
bundle exec rspec spec/path/to/file_spec.rb

# Run with documentation format
bundle exec rspec --format documentation
</code></pre>

<h2 id="development">Development</h2>

<ul>
<li>Environment variables are managed through the <code>dotenv-rails</code> gem</li>
<li>Code styling follows Rails Omakase conventions (via RuboCop)</li>
</ul>

<h3 id="caching">Caching</h3>

<p>The application uses Rails&#39; built-in caching system to improve performance:</p>

<h4 id="development-environment">Development Environment</h4>

<ul>
<li>Caching is disabled by default in development</li>
<li>To enable caching in development:
<code>bash
rails dev:cache
</code></li>
<li>This creates <code>tmp/caching-dev.txt</code> and enables an in-memory cache store</li>
<li>To disable caching, run the same command again</li>
<li>Cache is automatically cleared on server restart</li>
</ul>

<h4 id="production-environment">Production Environment</h4>

<p>For production deployments, it&#39;s recommended to use Redis as the cache store for better scalability:</p>

<ol>
<li><p>Add to your Gemfile:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>redis</span><span class='tstring_end'>&#39;</span></span>
</code></pre></li>
<li><p>Configure in <code>config/environments/production.rb</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_cache_store'>cache_store</span> <span class='op'>=</span> <span class='symbol'>:redis_cache_store</span><span class='comma'>,</span> <span class='lbrace'>{</span>
 <span class='label'>url:</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>REDIS_URL</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
 <span class='label'>pool_size:</span> <span class='int'>5</span><span class='comma'>,</span>
 <span class='label'>pool_timeout:</span> <span class='int'>5</span>
<span class='rbrace'>}</span>
</code></pre></li>
<li><p>Set the <code>REDIS_URL</code> environment variable in production</p></li>
</ol>

<p>Redis caching provides:</p>

<ul>
<li>Shared cache across multiple application servers</li>
<li>Persistent cache that survives application restarts</li>
<li>Better memory management</li>
<li>Built-in cache expiration</li>
</ul>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>Common issues and solutions:</p>

<ol>
<li><p><strong>API Key Issues</strong></p>

<ul>
<li>Verify key in <code>.env</code></li>
<li>Check API call limits</li>
<li>Ensure proper key activation (takes ~2 hours after registration)</li>
</ul></li>
<li><p><strong>Address Not Found</strong></p>

<ul>
<li>Try different address formats</li>
<li>Verify location is supported by OpenWeatherMap</li>
</ul></li>
</ol>

<h2 id="performance-optimization">Performance Optimization</h2>

<ul>
<li>Asset compression and minification</li>
<li>Database query optimization</li>
<li>API request batching</li>
</ul>

<h2 id="docker-setup">Docker Setup</h2>

<h3 id="prerequisites">Prerequisites</h3>

<ul>
<li>Docker</li>
<li>Docker Compose</li>
</ul>

<h3 id="quick-start">Quick Start</h3>

<ol>
<li>Build and start the application:</li>
</ol>

<pre class="code bash"><code class="bash">docker-compose up --build
</code></pre>

<p>The application will be available at <code>http://localhost:3000</code></p>

<h3 id="docker-configuration">Docker Configuration</h3>

<p>The application includes the following services:</p>

<ul>
<li>Web application (Rails)</li>
</ul>

<ol>
<li>Build the images:</li>
</ol>

<pre class="code bash"><code class="bash">docker-compose build
</code></pre>

<ol>
<li>Set up the environment:</li>
</ol>

<pre class="code bash"><code class="bash">cp .env.example .env
</code></pre>

<p>Edit <code>.env</code> with your OpenWeatherMap API key.</p>

<ol>
<li>Start services:</li>
</ol>

<pre class="code bash"><code class="bash">docker-compose up
</code></pre>

<ol>
<li>Run commands inside the container:</li>
</ol>

<pre class="code bash"><code class="bash"># Rails console
docker-compose exec web rails console

# Run tests
docker-compose exec web bundle exec rspec
</code></pre>

<h3 id="development-with-docker">Development with Docker</h3>

<ul>
<li>Changes to the codebase will automatically reload in development</li>
<li>Logs can be viewed using <code>docker-compose logs -f</code></li>
<li>Stop all services with <code>docker-compose down</code></li>
<li>Remove all containers and volumes with <code>docker-compose down -v</code></li>
</ul>

<h2 id="documentation">Documentation</h2>

<p>The project uses YARD for documentation. YARD docs are available for classes, modules, and methods throughout the codebase.</p>

<h3 id="viewing-documentation">Viewing Documentation</h3>

<ol>
<li><p>Generate the docs:</p>

<pre class="code bash"><code class="bash">yard doc
</code></pre></li>
<li><p>Either:</p>

<ul>
<li>Start the YARD server:
<code>bash
yard server
</code></li>
<li>Or view directly in your browser:
<code>bash
open doc/index.html  # On macOS/Linux
</code></li>
</ul></li>
<li><p>If using the server, view the documentation at <code>http://localhost:8808</code></p></li>
</ol>

<h3 id="documentation-coverage">Documentation Coverage</h3>

<ul>
<li>All public methods include YARD documentation</li>
<li>Documentation includes:

<ul>
<li>Method parameters and return values</li>
<li>Usage examples</li>
<li>Edge cases and exceptions</li>
<li>Related methods and see-also references</li>
</ul></li>
</ul>

<p>To check documentation coverage:</p>

<pre class="code bash"><code class="bash">yard stats --list-undoc
</code></pre>

<h2 id="contributing">Contributing</h2>

<ol>
<li>Fork the repository</li>
<li>Create your feature branch (<code>git checkout -b feature/amazing-feature</code>)</li>
<li>Commit your changes (<code>git commit -m &#39;Add some amazing feature&#39;</code>)</li>
<li>Push to the branch (<code>git push origin feature/amazing-feature</code>)</li>
<li>Open a Pull Request</li>
</ol>

<h2 id="license">License</h2>

<p>MIT License</p>

<p>Copyright (c) 2024 dandrews</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>
</div></div>

      <div id="footer">
  Generated on Fri Dec  6 17:22:30 2024 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.1.6).
</div>

    </div>
  </body>
</html>